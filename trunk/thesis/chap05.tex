\chapter{Simplificação de Superfícies baseadas em \textit{Splats}}
\section{Introdução}
\section{Clusterização Incremental}
\subsection{Centro e Normal}
\subsection{Eixos da Elípse}
\section{Erro Perpendicular}
No caso elíptico, o problema de determinar o ponto de uma elipse
$\mathbf{s}_i$ do conjunto que está sendo agregado ao plano da elipse
$\mathbf{s}_m$ que passa a representar esse conjunto, não é tão  imediato como no caso circular. Para
calcular a chamada distância perpendicular entre $\mathbf{s}_i$ e $\mathbf{s}_i$, que
notaremos $\mathbf{\mathcal D}(i,m)$ precisamos executar o seguinte processo.
Seja:
\begin{equation}
v(\alpha) = t_{i}^{1} \cos(\alpha) + t_{i}^{2} \sin(\alpha) + c_{i},
\end{equation}
a representação paramétrica do contorno da elipse $\mathbf{s}_i$ e
$\mathbf{n}$ a normal ao plano $P_{m}$ da elipse $$\mathbf{s}_m$$. Para
maximizar em $\alpha$ a distância entre $v(\alpha)$ e $P_{m}$ precisamos resolver o seguinte problema de otimização:
\begin{eqnarray*}
\lefteqn{max_{\alpha \in [0,2\pi]}<v(\alpha)-c_{m},n> = }\\ \nonumber
&&max_{\alpha \in [0,2\pi]}{ <t_{i}^{1},n> \cos(\alpha) + <t_{i}^{2},n>
\sin(\alpha) + <c_{i}- c_{m},n>
\end{eqnarray*}
Para  resolver esse problema começamos igualando a zero a derivada da função objetivo, o
que determina que a solução procurada $\alpha_{max}$ deve satisfazer a:
\begin{eqnarray*}
<t_{i}^{1},n> \sin(\alpha_{max}) + <t_{i}^{2},n>
\cos(\alpha_{max}) &=& 0 \\  
{\frac{<t_{i}^{2},n>}{<t_{i}^{1},n>}} &=& \tan(\alpha_{max})\\ \nonumber
\end{eqnarray*}
onde:
\begin{eqnarray*}
cos(\alpha_{max}) &=& +- \frac{ <t_{i}^{1},n>}{\sqrt{<t_{i}^{1},n>^{2} + 
<t_{i}^{2},n>^{2}}} \\ \nonumber
 sin(\alpha_{max}) &=& +- \frac{<t_{i}^{2},n>}{\sqrt{<t_{i}^{1},n>^{2} +
 <t_{i}^{2},n>^{2}}} \nonumber
\end{eqnarray*}

Para identificar inteiramente $\alpha_{max}$ resta, agora, decidir acerca dos
sinais que aparecem nas expressões acima, o que significa distinguir  os casos 
de distância máxima  e distância mínima a $P_{m}$. Isso é feito, observando que os 
resultados acima nos permitem escrever $\mathbf{\mathcal D}(i,m)$ da seguinte
forma:
\begin{eqnarray*}
$D(i,m) =  max_{sign \in [-1,1]}{\|sign( <t_{i}^{1},n> +
<t_{i}^{2},n>)}+<c_{i}- c_{m},n>\|} &=& \\{\| (<t_{i}^{1},n> + <t_{i}^{2},n>)\|
+ \|<c_{i}- c_{m},n>\|}&&
\end{eqnarray*}

\begin{figure}[ht]
\centering
\includegraphics[width=15.0cm]{img/cap05/perpendicular3} 
\caption{Erro Perpendicular}
\label{fig:merge_splats}
\end{figure}  
\section{Erro Tangencial}
O erro tangencial mede a  diferença entre a elipse que representa o cluster
($\mathbf{s}_{m}$) e o conjunto ($\Gamma$) formado pelas projeções das elipses
que fazem parte do cluster sobre o plano de $\mathbf{s}_{m}$. Há duas maneiras naturais de avaliar a diferença entre dois conjuntos planares. 
A primeira é dada pela área da diferença simétrica entre  os conjuntos. 
No caso, como $\mathbf{s}_{m}$ contem $\Gamma$, essa diferença é simplesmente
$\mathbf{s}_{m}-\Gamma$. A segunda pela maior distância de um ponto de um
conjunto a outro. Como $\Gamma \subseteq \mathbf{s}_{m}$, podemos nos restringir a encontrar o ponto 
$d$ e $\mathbf{s}_{m}$ mais afastado de $\Gamma$. 
Para obter computacionalmente a área de $\mathbf{s}_{m}
-\Gamma$($\mathbf{\mathcal A}(\mathbf{s}_{m}-\Gamma$)),pensamos em duas
estratégias :
\begin{enumerate}
 \item { A primeira visa obter essa área de forma exata. De fato, identificando
 os pontos extremos de cada elipse em relação a uma das coordenadas e os ordenando segundo ela, 
 podemos por um algoritmo de varredura de linhas, identificar as interseções dos contornos das 
 elipses de $\Gamma$ e partir delas $\mathbf{\mathcal
 A}(\mathbf{s}_{m}-\Gamma$). Esse procedimento, entretanto, tem uma
 complexidade que torna impraticável a sua utilização para nossos propósitos.
 Para concluir isso, basta considerar que ele é $O(n_{x} \log{n_{x}})$, onde $
 n_{x}$ é o número de intersecções entre elipses de $\Gamma$, o qual já é quadrático no número dessas elipses. Além disso o simples cômputo de uma intersecção entre duas elipses em posição genérica já envolve 
 a resolução de uma equação do quarto grau. Assim pretender encontrar o valor exato de 
$\mathbf{\mathcal A}(\mathbf{s}_{m}-\Gamma$) está fora de cogitação. }
 \item { Imergir as elipses envolvidas numa malha regular e determinar a
 situação de pertinência em relação a $\mathbf{s}_{m}$ e $\Gamma$ do centro de cada
 célula. Uma célula cujo centro pertence a $\mathbf{s}_{m}$ e não a $\Gamma$, contribui
 com sua área para o cômputo de $\mathbf{\mathcal A}(\mathbf{s}_{m}-\Gamma$). A
 determinação da pertinência com relação a todas as elipses de $\Gamma$, que tem de ser efetuada para um
 número de pontos quadrático na resolução da malha prejudica a performance
 dessa alternativa, obrigando a que se empregue uma malha muito grosseira ou
 que se limite o número de elipses sendo agregadas. Portanto também essa opção
 não parece ser inteiramente satisfatória.}
\end{enumerate}


Tendo em vista as dificuldades apontadas acima na obtenção da aéra de
$\mathbf{s}_{m}-\Gamma$ nos concentramos em obter o erro tangencial via uma
aproximação computacionalmente viável de $dist(\mathbf{s}_{m},\Gamma$), a distância a
$\Gamma$ do ponto de $s_{m}$ mais afastado dele. A determinação de
$dist(\mathbf{s}_{m},\Gamma$) fica facilitada se assumirmos que o ponto de $\mathbf{s}_{m}$ mais
distante de $\Gamma$ estiver na sua borda. Isso certamente é verdade se o
número de elipses em $\Gamma$ for igual a $2$ e em casos reais, devido a
própria limitação do tamanho do cluster e do fato do próprio processo de
expansão que gera os clusters não fazer curvas acentuadas, essa suposição não
causou distorções acentuadas no cálculo do erro tangencial. Se podemos limitar
a busca do ponto mais distante de $\Gamma$, a borda de $\mathbf{s}_{m}$,
$dist(\mathbf{s}_{m},\Gamma$) pode ser aproximada de forma aceitável e com custo
computacional adequado, da seguinte forma:

\begin{itemize}
  \item {O contorno da elipse $\mathbf{s}_m$ que
  representa o cluster é discretizado num conjunto, $\mathbf{\mathcal C} =
  \{p_1,\ldots,p_8\}$, de $8$ de seus pontos. Específicamente,
  aqueles que definem com o centro da elipse raias que fazem com o eixo maior um ângulo múltiplo de $45^{o}$.  }
\item {Seja  $\mathbf{s}_i$ uma elipse do conjunto $\mathbf{\mathcal T} =
\{\mathbf{s}_1, \ldots,\mathbf{s}_n\}$, que está sendo condensado e $\mathbf{s}_i^\prime$ um
elipse do conjuto $\mathbf{\mathcal T}^\prime = \{\mathbf{s}_i^\prime,
\ldots,\mathbf{s}_n^\prime\}$\ de elipses projetadas sobre o plano definodo
por $\mathbf{s}_m$. A distância de cada um dos pontos ($p_{k} \in $ $\mathbf{\mathcal C}$) em que se discretiza 
$\mathbf{s}_m$ a $\mathbf{s}_i^\prime$  $-$ que notaremos por
$dist(p_{k},\mathbf{s}_i^\prime)$ $-$ é obtida de forma aproximada da forma
indicada abaixo. Os elementos referidos no texto a seguir estão representados
na Figura~\ref{fig:merge_splats}.}
\end{itemize}

\begin{figure}[ht]
\centering
\includegraphics[width=15.0cm]{img/cap05/tangencial} 
\caption{ Distância aproximada de uma elipse $\mathbf{s}_i^\prime$ do conjunto
das elipses projetadas $\mathbf{\mathcal T}^\prime$ ao contorno de $\mathbf{s}_m$
dicretizado em $8$ pontos. \textbf{Esquerda:}. \textbf{Direita:}.}
\label{fig:merge_splats}
\end{figure}  


\begin{enumerate}
  \item {No caso óbvio em que $p_{k} \in  \mathbf{s}_i^\prime$, teremos
  $dist(p_{k}, \mathbf{s}_i^\prime) = 0 $.}
  \item {Caso contrário  considere o segmento de reta delimitado pelo ponto $q_{1}$,  
onde a raia $[ c_{i}, p_{k}]$ corta a elipse  $\mathbf{s}_i^\prime$  e $q_{2}$,  a extremidade do eixo 
maior de $\mathbf{s}_i^\prime$  que está mais próxima de $p_{k}$.}
\item {Computa-se a distância de  $p_{k}$ a $[q_{1}, q_{2}]$ e usa-se essa distância como 
aproximação de $dist(p_{k}, \mathbf{s}_i^\prime))$. Essa aproximação tem erro
percentual limitado por ? e revelou-se suficiente para os propósitos de nossa aplicação.}
\end{enumerate}

Utilizando a distancia aproximada definida acima se obtem para cada $p_{k}$
sua distância ao conjunto de elipses  $\mathbf{\mathcal T}^\prime$ $-$ dado por
$ \min_{ \mathbf{s}_i^\prime \in  \mathbf{\mathcal T}^\prime}
(dist_{p_k \in \mathbf{\mathcal C}}(p_{k}, \mathbf{s}_i^\prime))$. O erro
tangencial será finalmente obtido tomando-se a maior dessas distâncias. Ele pode, então, ser expresso por:


\begin{eqnarray}
e_t &=& \displaystyle\max  \{ \min_{ \mathbf{s}_i^\prime \in  \mathbf{\mathcal T}^\prime}
(dist_{p_k \in \mathbf{\mathcal C}}(p_{k}, \mathbf{s}_i^\prime)) \}\\\nonumber 
\end{eqnarray}

\section{Resultados}

\section{Discurssão}
